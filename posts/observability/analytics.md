---
title: 'Analytics'
metaDesc: 'Analytics is an important observability component of an edge solution to understand user traffic, and the behavior of the solution. For example, developers would like to view how is their traffic volumes are evolving, where users are coming from from, what are the main attack vectors that are targeting the application, how much CloudFront is offloading the origin, etc...'
socialImage: static-assets/thumbnail-edge.png
---
## Overview
Analytics is an important observability component of an edge solution to understand user traffic, and the behavior of the solution. For example, developers would like to view how is their traffic volumes are evolving, where users are coming from from, what are the main attack vectors that are targeting the application, how much CloudFront is offloading the origin, etc... AWS providers developers with different approches to consume analytics from their edge solution, according to the required customizations and the appetite to spend initial efforts to create it.

## Common use cases

### Standard server-side analytics capabilities
CloudFront provides you with native reporting capabilities. In CloudFront's console, you can find [reports](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/reports.html) that cover cache statistics (e.g. status codes, result types), most popular objects, referrers, viewer reports (e.g. devices, browsers, locations) and usage reports (e.g. transferred bytes and number of requests). 

### Common server-side analytics solutions
When you need a more customized dashboard, you can leverage the logs generated by CloudFront and WAF to build a personalized analytics solution. 

#### Logging requests
CloudFront provides [two options for logging requests](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/logging.html):
* [Standard logs](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/AccessLogs.html), that are shipped to S3 at no additional charge, with a relatively reliable delivery, and configured at distribution level for all requests.
* [Real Time logs](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/real-time-logs.html), that are delivered to Kinesis Data stream within seconds, configured at the granularity of cache behaviors with possibility for sampling, with more available log field, but with an additional charge ($0.01 for every 1 Million log records). This is typically the logs that are used to build custom analytics on top of CloudFront.

WAF provides [three options for logging requests](https://docs.aws.amazon.com/waf/latest/developerguide/logging-destinations.html):
* [Ship to S3](https://docs.aws.amazon.com/waf/latest/developerguide/logging-s3.html), which is mostly suited for archival use cases.
* [Ship to CloudWatch logs](https://docs.aws.amazon.com/waf/latest/developerguide/logging-cw-logs.html), which is mostly suited for troubleshooting use cases with [Log insightsÂ°(https://aws.amazon.com/premiumsupport/knowledge-center/waf-analyze-logs-stored-cloudwatch-s3/).
* [Ship to Kinesis Firehose](https://docs.aws.amazon.com/waf/latest/developerguide/logging-kinesis.html), which is mostly suited for sending processing logs and sending them to custom destinations like an OpenSearch cluster.

In summary, while CloudFront and WAF offers multiple logging options, it's common to use the Real Time Logs of CloudFront, and WAF logs both shipped to Kinesis services.

#### Creating dashboards

##### Based on OpenSearch 
If you prefer using OpenSearch, with Kibana as a user interface for dashboards, follow the guidance provided in the below blogs:
* [Blog](https://aws.amazon.com/blogs/networking-and-content-delivery/cloudfront-realtime-logs/) for building a dashboard based on CloudFront logs
* [Blog](https://aws.amazon.com/blogs/security/deploy-dashboard-for-aws-waf-minimal-effort/) for building a dashboard based on WAF logs

##### Based on TimeStream
If you prefer using TimeStream, with Graphana as a user interface for dashboards, follow the guidance provided in this [Github repository](https://github.com/aws-samples/aws-cloudfront-realtime-monitoring). If you are using TimeStream to send WAF and CloudFronts' logs simultaneously, you can use Graphana to correlate both logs for the same request using the request-id. 

##### 3rd party SIEM
3rd party SIEM have integrations with AWS, and have build ready to use dashboards for CloudFront and WAF. Examples include DataDog ([WAF](https://docs.datadoghq.com/integrations/amazon_waf/)) and Sumologic ( [WAF](https://help.sumologic.com/07Sumo-Logic-Apps/01Amazon_and_AWS/AWS_WAF/Install_the_AWS_WAF_App_and_View_the_Dashboards), [CloudFront](https://help.sumologic.com/07Sumo-Logic-Apps/01Amazon_and_AWS/Amazon_CloudFront/Amazon-CloudFront-App-Dashboards)).

### Advanced analytics
You can build an advanced analytics solutions starting from the common solutions exposed earlier. For example, you can create automated anomaly detections using several specialized AWS services. Read this [blog](https://aws.amazon.com/blogs/security/analyze-aws-waf-logs-using-amazon-opensearch-service-anomaly-detection-built-on-random-cut-forests/) to learn how to use the real-time anomaly detection capability in Amazon OpenSearch Service to detect anomalous behaviors based on WAF logs (e.g. high traffic from unusual counties, and un-expected write requests for a read-heavy application).

### Client-side analytics
It's recommended to have a the full picture on your users experience by also enabling client analytics. This can be done using Real User Monitoring tools, such as CloudWatch RUM. CloudWatch RUM requires to you to add a simple SDK to your web application to start collecting client-side data and provide you with useful analytics. In CloudWatch RUM, [analytics](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-RUM-view-data.html) include statistics about the application performance, errors, user devices and browsers, and finally user journey as they navigate through your application.

## Additional resources
TODO add solution by stanislav
TODO log enrichment
TODO analytics from CFF?